(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d159ba8"],{"5bae":function(t,e,c){"use strict";c.r(e);var a=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",[c("div",{staticClass:"container mt-8 mb-6"},[c("div",{staticClass:"row mb-7"},[c("div",{staticClass:"col-md-6"},[c("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:"詳細產品照片"}})]),c("div",{staticClass:"col-md-6 d-flex flex-column justify-content-between"},[c("h3",{staticClass:"product__title mt-2"},[t._v(t._s(t.product.title))]),c("h6",{staticClass:"product__type"},[t._v("型號 : "+t._s(t.product.content))]),c("h6",{staticClass:"product__description"},[t._v("產品說明 :")]),c("p",{staticClass:"product__text"},[t._v(" "+t._s(t.product.description))]),c("div",{staticClass:"d-flex justify-content-start align-items-end"},[t.product.price?t._e():c("div",{staticClass:"h6"},[t._v("NT "+t._s(t._f("currency")(t.product.origin_price)))]),t.product.price?c("del",{staticClass:"h6 mr-4 text-muted"},[t._v("NT "+t._s(t._f("currency")(t.product.origin_price)))]):t._e(),t.product.price?c("div",{staticClass:"h5 text-danger"},[t._v("NT "+t._s(t._f("currency")(t.product.price)))]):t._e()]),c("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"product__form form-control",attrs:{name:""},on:{change:function(e){var c=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?c:c[0])}}},t._l(5,(function(e){return c("option",{key:e,domProps:{value:e}},[t._v(" 購買 "+t._s(e)+" "+t._s(t.product.unit)+" ")])})),0),c("div",{staticClass:"d-flex justify-content-end align-items-end"},[c("h5",{staticClass:"mr-4 product__total"},[t._v("小計 : NT"+t._s(t._f("currency")(t.product.num*t.product.price)))]),c("button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn btn-primary mt-2",attrs:{type:"button"},on:{click:function(e){return t.addToCart(t.product.id,t.product.num,t.product.title,t.product.price)}}},[t.loadingItem===t.product.id?c("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])]),c("h4",[t._v("你可能也會喜歡")]),c("div",{staticClass:"row mt-5"},[c("div",{staticClass:"col"},[c("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},t._l(t.filterData,(function(e){return c("swiper-slide",{key:e.id},[c("div",{staticClass:"card product__card h-100 mt-3",on:{click:t.toProduct}},[c("div",{staticClass:"card__img"},[c("img",{staticClass:"card-img-top detail__img",attrs:{src:e.imageUrl,alt:"可能也會喜歡的產品"}})]),c("div",{staticClass:"card-body"},[c("h5",{staticClass:"card-title text-center detail__text"},[t._v(t._s(e.title))]),c("div",{staticClass:"text-truncate pb-2"},[t._v(" "+t._s(e.description)+" ")]),c("div",{staticClass:"d-flex justify-content-end detail__price"},[e.price?t._e():c("div",[t._v("NT "+t._s(t._f("currency")(e.origin_price)))]),e.price?c("del",{staticClass:"text-muted mr-3"},[t._v("NT "+t._s(t._f("currency")(e.origin_price)))]):t._e(),e.price?c("div",{staticClass:"text-danger"},[t._v("NT "+t._s(t._f("currency")(e.price)))]):t._e()])])])])})),1)],1)])])])},r=[],i=(c("99af"),c("4de4"),c("4160"),c("c975"),c("a434"),c("159b"),c("5530")),s=c("2f62"),o={name:"ProductDetail",data:function(){return{products:[],product:{},productId:"",swiperOption:{slidesPerView:1,loop:!0,spaceBetween:30,grabCursor:!0,autoplay:{delay:1500,disableOnInteraction:!1},breakpoints:{480:{slidesPerView:2,spaceBetween:20},800:{slidesPerView:3,spaceBetween:20}}},cartData:[]}},methods:{getProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("camp","/product/").concat(t.productId);t.$store.dispatch("updateLoading",!0),t.$http.get(e).then((function(e){t.product=e.data.product,t.product.num=1,t.$store.dispatch("updateLoading",!1)}))},getCart:function(){this.cartData=JSON.parse(localStorage.getItem("cartData"))||[]},addToCart:function(t,e,c,a){var r=this,i=[];if(r.cartData.forEach((function(t){return i.push(t.product_id)})),-1===i.indexOf(t)){var s={product_id:t,qty:e,title:c,price:a};r.cartData.push(s),localStorage.setItem("cartData",JSON.stringify(r.cartData)),r.getCart(),r.$bus.$emit("cart:get")}else r.cartData.forEach((function(i,s){if(i.product_id===t){var o=i.qty,n=o+e,d={product_id:t,qty:n,title:c,price:a};r.cartData.splice(s,1),r.cartData.push(d),localStorage.setItem("cartData",JSON.stringify(r.cartData)),r.getCart(),r.$bus.$emit("cart:get")}}))},getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("camp","/products/all");t.$http.get(e).then((function(e){t.products=e.data.products}))},toProduct:function(){this.$router.push("/customer_product")}},computed:Object(i["a"])({filterData:function(){var t=this,e=[];return t.products.filter((function(c){c.category===t.product.category&&e.push(c)})),e}},Object(s["c"])("cartModule",["cart","loadingItem"])),directives:{preventReClick:{inserted:function(t,e){t.addEventListener("click",(function(){t.disabled||(t.disabled=!0,setTimeout((function(){t.disabled=!1}),1e3))}))}}},created:function(){this.productId=this.$route.params.productId,this.getProduct(),this.getCart(),this.getProducts()}},n=o,d=c("2877"),u=Object(d["a"])(n,a,r,!1,null,null,null);e["default"]=u.exports},c975:function(t,e,c){"use strict";var a=c("23e7"),r=c("4d64").indexOf,i=c("a640"),s=c("ae40"),o=[].indexOf,n=!!o&&1/[1].indexOf(1,-0)<0,d=i("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:n||!d||!u},{indexOf:function(t){return n?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5d159ba8.b9786bfb.js.map